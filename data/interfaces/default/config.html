<%inherit file="base.html"/>
<%!
    import lazylibrarian
%>

<%def name="headerIncludes()">
    <div id="subhead_container">
        <ul id="subhead_menu">
            <li><a onclick="self.shutdownQA(this)" id="button">Shutdown</a></li>
            <li><a id="button" onclick="self.restartQA(this, '', '')">Restart</a></li>
            <li ><a id="button" href="checkForUpdates">Check Version</a></li>
            <li ><a id="button" href="showJobs">Job Status</a></li>
            <li ><a id="button" href="restartJobs">Restart Jobs</a></li>
        </ul>
    </div>
</%def>
<%def name="body()">
    <form action="configUpdate" method="post">
    <div id="form">
    <div id="tabs">
        <ul>
            <li id="tabs1" class="active"><a  href="#tabs-1" onclick="$('#tabs2').removeClass('active');$('#tabs3').removeClass('active');$('#tabs4').removeClass('active');$('#tabs5').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-1').parent().show();$('#tabs1').addClass('active');">Web Interface</a></li>
            <li id="tabs2" ><a  href="#tabs-2" onclick="$('#tabs1').removeClass('active');$('#tabs3').removeClass('active');$('#tabs4').removeClass('active');$('#tabs5').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-2').parent().show();$('#tabs2').addClass('active');">Import Options</a></li>
            <li id="tabs3" ><a  href="#tabs-3" onclick="$('#tabs1').removeClass('active');$('#tabs2').removeClass('active');$('#tabs4').removeClass('active');$('#tabs5').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-3').parent().show();$('#tabs3').addClass('active');">Download Settings</a></li>
            <li id="tabs4" ><a  href="#tabs-4" onclick="$('#tabs1').removeClass('active');$('#tabs2').removeClass('active');$('#tabs3').removeClass('active');$('#tabs5').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-4').parent().show();$('#tabs4').addClass('active');">Providers</a></li>
            <li id="tabs5" ><a  href="#tabs-5" onclick="$('#tabs1').removeClass('active');$('#tabs2').removeClass('active');$('#tabs3').removeClass('active');$('#tabs4').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-5').parent().show();$('#tabs5').addClass('active');">Search & Processing</a></li>
            <li id="tabs6" ><a  href="#tabs-6" onclick="$('#tabs1').removeClass('active');$('#tabs2').removeClass('active');$('#tabs3').removeClass('active');$('#tabs4').removeClass('active');$('#tabs5').removeClass('active');$('.table_wrapper').hide();$('.tabs-6').parent().show();$('#tabs6').addClass('active');">Notifications</a></li>
        </ul>
    </div>
    <div class="table_wrapper">
        
        <div class="tabs-1">
        <table class="configtable" summary="Webinterface">
            <tr>
                <td>
                  <div>
                  <label>Hostname:</label><input type="text" name="http_host" value="${lazylibrarian.HTTP_HOST}" size="20" maxlength="40">
                  </div>
                  <div>
                  <label>Port:</label><input type="text" name="http_port" value="${lazylibrarian.HTTP_PORT}" size="10" maxlength="40">
                  </div>
		  <label>Web Root:</label><input type="text" name="http_root" value="${lazylibrarian.HTTP_ROOT}" size="20" maxlength="40">
		  </div>
                  <br>
                  <br>
                  <label>Logdir:</label><input type="text" name="logdir" value="${lazylibrarian.LOGDIR}" size="26"><br>
                  <label>Log Limit:</label><input type="text" name="loglimit" value="${lazylibrarian.LOGLIMIT}" size="4"><br>
                  <i class="smalltext">Size of on-screen log, smaller is faster and uses less memory</i><br>
                  <label>Log Level:</label><input type="text" name="loglevel" value="${lazylibrarian.LOGLEVEL}" size="4"><br>
                  <i class="smalltext">0=Quiet, 1=Normal, 2=Debug, >2=file/console log always set to debug (ignores toggle)</i>
		  <br>
		  <div>
		  <label>Proxy Host:</label><input type="text" name="proxy_host" value="${lazylibrarian.PROXY_HOST}" size="20"><br>
		  <i class="smalltext">Set this value if you are behind a proxy</i>
		  </div>
		  <br>
		  <div>
		  <label>Proxy Type:</label><input type="text" name="proxy_type" value="${lazylibrarian.PROXY_TYPE}" size="10"><br>
                  <i class="smalltext">http, https, etc</i>
		  </div>
                </td>
                <td>
                    <div>
                  <label>Username:</label><input type="text" name="http_user" value="${lazylibrarian.HTTP_USER}" size="20" maxlength="40">
                  </div>
                  <div>
                  <label>Password:</label><input type="password" name="http_pass" value="${lazylibrarian.HTTP_PASS}" size="20" maxlength="40">
                  </div>
                    <%
                        if lazylibrarian.LAUNCH_BROWSER == True:
                            checked = 'checked="checked"'
                        else:
                            checked = ''
                    %>
                    <BR>
                    <input type="checkbox" name="launch_browser" value=1 ${checked} />
                    <label>  Launch browser</label>
                    <h5>Interface: <select name="http_look" style="float:right;"><h5>
                    %for http_look in config['http_look_list']:
                        <%
                            if http_look == lazylibrarian.HTTP_LOOK:
                                selected = 'selected="selected"'
                            else:
                                selected = ''
                        %>
                        <option value="${http_look}" ${selected}>${http_look}</option>
                    %endfor
                    </select>
                </td>
            </tr>
        </table>
        </div>
    </div>


   <div class="table_wrapper" style="display:none">
        <div class="tabs-2">
        <table class="configtable" summary="Importsettings">
            <tr>
                <td>
                    <h3>Book API</h3>
                    <BR>
                    <%
                        if lazylibrarian.BOOK_API == "GoodReads":
                            gr_selected = 'selected="selected"'
                        else:
                            gr_selected = ''

                        if lazylibrarian.BOOK_API == "GoogleBooks":
                            gb_selected = 'selected="selected"'
                        else:
                            gb_selected = ''
                    %>
                    <label>Book Search API           .</label><select name="book_api"  style="float:right;">
                    <option value = "GoodReads" ${gr_selected}>GoodReads</option>
                    <option value = "GoogleBooks" ${gb_selected}>GoogleBooks</option>
                    </select>
                    <BR>
                    <label>Goodreads API:</label><input type="text" name="gr_api" value="${lazylibrarian.GR_API}" size="30" maxlength="40" >
                    <BR>
                    <label>GoogleBooks API:</label><input type="text" name="gb_api" value="${lazylibrarian.GB_API}" size="30" maxlength="40" >
                    <BR><br><br>
                    <h3>File Formats</h3>
                    <BR>
                    <label>Ebooks:</label><input type="text" name="ebook_type" value="${lazylibrarian.EBOOK_TYPE}" size="0" maxlength="40">
                    <br>
                    <small>Comma separated file extensions:
                    <BR>Default: epub, mobi, pdf </small>
                    <BR>
                    <label>Magazines:</label>
                    <input type="text" name="mag_type" value="${lazylibrarian.MAG_TYPE}" size="20" maxlength="40">
                    <br>
                    <small>Comma separated file extensions:
                    <BR>Default: pdf </small>
                </td>
                <td>
                    <h3>Language</h3>
                    <BR>
                    <label>Import languages:</label><input type="text" name="imp_preflang" value="${lazylibrarian.IMP_PREFLANG}" size="20" maxlength="40">
                    <br>
                    <i class="smalltext">Comma separated country shortcodes:
                    <br> GoodReads e.g: eng, en-US, spa, ita
                    <BR> GoogleBooks e.g: en, es, it
                    <BR> Default: en, eng, en-US
                    <BR> Try adding "Unknown" to list if GoodReads is missing results, or "All" if you don't want to check for language</i>
		    <BR><BR>
                    <label>Languages for month names:</label><input type="text" name="imp_monthlang" value="${lazylibrarian.IMP_MONTHLANG}" size="20" maxlength="40">
                    <br><i class="smalltext">Comma separated language codes for magazine issues:
                    <br> e.g: fr_FR.utf8, es_ES.utf8        
                    <BR>Default: blank, English month names are preloaded   Changes to this setting require a restart</i>
                </td>
            </tr>
        </table>
        </div>
    </div>


    <div class="table_wrapper" style="display:none">
        <div class="tabs-3">
        <table class="configtable" summary="Downloadsettings">
            <tr>
                <td>
                    <fieldset>
                        <h3>Usenet</h3>
                        <div class="row checkbox">
                        <%
                        if lazylibrarian.USE_NZB == True:
                            checked = 'checked="checked"'
                        else:
                            checked = ''
                        %>
                        <input type="checkbox" name="use_nzb" id="nzb" value="1" ${checked} />
                        <label>Enable NZB and Torznab</label>
                        </div>
                        <fieldset id="usenet_options">
                            <div class="row checkbox">
                            <%
                            if lazylibrarian.NZB_DOWNLOADER_SABNZBD == True:
                                checked = 'checked="checked"'
                            else:
                                checked = ''
                            %>
                            <input type="checkbox" name="nzb_downloader_sabnzbd" id="nzb_downloader_sabnzbd" value="1" ${checked} />
                                <label>Use Sabnzbd+</label>
                            </div>
                            <fieldset id="sabnzbd_options">
                                <div class="row">
                                    <label>SABnzbd Host:</label>
                                    <input type="text" name="sab_host" value="${lazylibrarian.SAB_HOST}" size="26" align="right">
                                </div>
                                <div class="row">
                                    <label>SABnzbd Port:</label>
                                    <input type="text" name="sab_port" value="${lazylibrarian.SAB_PORT}" size="26">
                                </div>
                                <div class="row">
                                    <label>SABnzbd Username</label>
                                    <input type="text" name="sab_user" value="${lazylibrarian.SAB_USER}" size="26">
                                </div>
                                <div class="row">
                                    <label>SABnzbd Password:</label>
                                    <input type="password" name="sab_pass" value="${lazylibrarian.SAB_PASS}" size="26">
                                </div>
                                <div class="row">
                                    <label>SABnzbd API:</label>
                                    <input type="text" name="sab_api" value="${lazylibrarian.SAB_API}" size="26">
                                </div>
                                <div class="row">
                                    <label>SABnzbd Category:</label>
                                    <input type="text" name="sab_cat" value="${lazylibrarian.SAB_CAT}" size="26">
                                </div>
                                <div class="row">
                                    <label>SABnzbd SubDir:</label>
                                    <input type="text" name="sab_subdir" value="${lazylibrarian.SAB_SUBDIR}" size="26">
                                </div>
				<div class="row">
				    <label>Retention Max Age:</label>
				    <input type="text" name="usenet_retention" value="${lazylibrarian.USENET_RETENTION}" size="26">
				</div>
                            </fieldset>

                            <div class="row checkbox">
                                <%
                                if lazylibrarian.NZB_DOWNLOADER_NZBGET == True:
                                    checked = 'checked="checked"'
                                else:
                                    checked = ''
                                %>
                                <input type="checkbox" name="nzb_downloader_nzbget" id="nzb_downloader_nzbget" value="1" ${checked} />
                                <label>Use NZBGet</label>
                            </div>
                            <fieldset id="nzbget_options">
                                <div class="row">
                                    <label>NZBGet Host:</label>
                                    <input type="text" name="nzbget_host" value="${lazylibrarian.NZBGET_HOST}" size="26" align="right">
                                </div>
                                <div class="row">
                                    <label>Username</label>
                                    <input type="text" name="nzbget_user" value="${lazylibrarian.NZBGET_USER}" size="26">
                                </div>
                                <div class="row">
                                    <label>Password:</label>
                                    <input type="password" name="nzbget_pass" value="${lazylibrarian.NZBGET_PASS}" size="26">
                                </div>
                                <div class="row">
                                    <label>Category:</label>
                                    <input type="text" name="nzbget_cat" value="${lazylibrarian.NZBGET_CATEGORY}" size="26">
                                </div>
                                <div class="row">
                                    <label>Priority:</label>
                                    <input type="text" name="nzbget_priority" value="${lazylibrarian.NZBGET_PRIORITY}" size="26">
                                </div>
                            </fieldset>

                            <div class="row checkbox">
                                <%
                                if lazylibrarian.NZB_DOWNLOADER_BLACKHOLE == True:
                                    checked = 'checked="checked"'
                                else:
                                    checked = ''
                                %>
                                <input type="checkbox" name="nzb_downloader_blackhole" id="nzb_downloader_blackhole" value="1" ${checked} />
                                <label>Use NZB Blackhole</label>
                            </div>
                            <fieldset id="nzb_blackhole_options">
                                <div class="row">
                                    <label>NZB Blackhole Directory:</label>
                                    <input type="text" name="nzb_blackholedir" value="${lazylibrarian.NZB_BLACKHOLEDIR}" size="26">
                            </fieldset>
                        </fieldset>
                    </fieldset>
                    </td>
                    <td>
                    <fieldset>
                        <h3>Torrents</h3>
                        <div class="row checkbox">
                                <%
                                if lazylibrarian.USE_TOR == True:
                                    checked = 'checked="checked"'
                                else:
                                    checked = ''
                                %>
                            <input type="checkbox" name="use_tor" id="tor" value="1" ${checked} />
                            <label>Enable Torrents</label>
                        </div>
                        <fieldset id="torrent_options">

                            <div>
                                <label>Minimum seeders:</label>
                                <input type="text" name="numberofseeders" value="${lazylibrarian.NUMBEROFSEEDERS}" size="5">
                                <BR>
                                <small>Number of minimum seeders a torrent must have to be accepted</small>
                            </div>
                             <div class="row checkbox">
                                <%
                                if lazylibrarian.TOR_DOWNLOADER_DELUGE == True:
                                    checked = 'checked="checked"'
                                else:
                                    checked = ''
                                %>
                                <input type="checkbox" name="tor_downloader_deluge" id="tor_downloader_deluge" value="1" ${checked} />
                                <label>Use Deluge</label>
                            </div>
                            <fieldset id="deluge_options">
                                <div class="row">
                                    <label>Deluge Host:</label>
                                    <input type="text" name="deluge_host" value="${lazylibrarian.DELUGE_HOST}" size="26">
                                </div>
                                <div class="row">
                                    <label>Deluge Port:</label>
                                    <input type="text" name="deluge_port" value="${lazylibrarian.DELUGE_PORT}" size="26">
                                </div>
                                <div class="row">
                                    <label>Username:</label>
                                    <input type="text" name="deluge_user" value="${lazylibrarian.DELUGE_USER}" size="26">
                                </div>
                                <div class="row">
                                    <label>Password:</label>
                                    <input type="password" name="deluge_pass" value="${lazylibrarian.DELUGE_PASS}" size="26">
                                </div>
                            </fieldset>

                             <div class="row checkbox">
                                <%
                                if lazylibrarian.TOR_DOWNLOADER_TRANSMISSION == True:
                                    checked = 'checked="checked"'
                                else:
                                    checked = ''
                                %>
                                <input type="checkbox" name="tor_downloader_transmission" id="tor_downloader_transmission" value="1" ${checked} />
                                <label>Use Transmission</label>
                            </div>
                            <fieldset id="transmission_options">
                                <div class="row">
                                    <label>Transmission Host:port :</label>
                                    <input type="text" name="transmission_host" value="${lazylibrarian.TRANSMISSION_HOST}" size="26">
                                </div>
                                <div class="row">
                                    <label>Username :</label>
                                    <input type="text" name="transmission_user" value="${lazylibrarian.TRANSMISSION_USER}" size="26">
                                </div>
                                <div class="row">
                                    <label>Password :</label>
                                    <input type="password" name="transmission_pass" value="${lazylibrarian.TRANSMISSION_PASS}" size="26">
                                </div>
                            </fieldset>

                             <div class="row checkbox">
                                <%
                                if lazylibrarian.TOR_DOWNLOADER_UTORRENT == True:
                                    checked = 'checked="checked"'
                                else:
                                    checked = ''
                                %>
                                <input type="checkbox" name="tor_downloader_utorrent" id="tor_downloader_utorrent" value="1" ${checked} />
                                <label>Use uTorrent</label>
                            </div>
                            <fieldset id="utorrent_options">
                                <div class="row">
                                    <label>uTorrent Host:</label>
                                    <input type="text" name="utorrent_host" value="${lazylibrarian.UTORRENT_HOST}" size="26">
                                </div>
                                <div class="row">
                                    <label>Username:</label>
                                    <input type="text" name="utorrent_user" value="${lazylibrarian.UTORRENT_USER}" size="26">
                                </div>
                                <div class="row">
                                    <label>Password:</label>
                                    <input type="password" name="utorrent_pass" value="${lazylibrarian.UTORRENT_PASS}" size="26">
                                </div>
                                <div class="row">
                                    <label>uTorrent Label:</label>
                                    <input type="text" name="utorrent_label" value="${lazylibrarian.UTORRENT_LABEL}" size="26">
                                </div>
                            </fieldset>
                            <div class="row checkbox">
                                <%
                                if lazylibrarian.TOR_DOWNLOADER_BLACKHOLE == True:
                                    checked = 'checked="checked"'
                                else:
                                    checked = ''
                                %>
                                 <input type="checkbox" name="tor_downloader_blackhole" id="tor_downloader_blackhole" value="1" ${checked} />
                                 <label>Use Torrent Blackhole</label>
                            </div>
                            <fieldset id="tor_blackhole_options">
                                <div class="row">
                                    <label>Torrent Blackhole Directory:</label>
                                    <input type="text" name="torrent_dir" value="${lazylibrarian.TORRENT_DIR}" size="26">
                                </div>
                            </fieldset>
                        </fieldset>
                        <br>
                        <h3>Download Settings</h3>
                        <div class="row">
                            <label>Directory:</label><input type="text" name="download_dir" value="${lazylibrarian.DOWNLOAD_DIR}" size="26">
                            <BR>
                            <small>Full path to the folder where books are downloaded</small>
                        </div>
                    </fieldset>
                </td>
            </tr>
        </table>
        </div>
    </div>

    <div class="table_wrapper" style="display:none">
        <div class="tabs-4">
        <table class="configtable" summary="Providers">
            <tr>
                <td>
                    <h3>Newznab Providers</h3>
                </td>
		        <td>
		            <h3>Torznab Providers</h3>
               </td>
		    </tr>
            <tr>
                <td>
                    <%
                    if lazylibrarian.NEWZNAB0 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="newznab0" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host0" value="${lazylibrarian.NEWZNAB_HOST0}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="newznab_api0" value="${lazylibrarian.NEWZNAB_API0}" size="26" maxlength="40">
		        </td>
        	    <td>
                    <%
                    if lazylibrarian.TORZNAB0 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="torznab0" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host0" value="${lazylibrarian.TORZNAB_HOST0}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="torznab_api0" value="${lazylibrarian.TORZNAB_API0}" size="26" maxlength="40">
            	</td>
            </tr>
	        <tr>
		        <td>
                    <%
                    if lazylibrarian.NEWZNAB1 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="newznab1" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host1" value="${lazylibrarian.NEWZNAB_HOST1}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="newznab_api1" value="${lazylibrarian.NEWZNAB_API1}" size="26" maxlength="40">
                </td>
        	    <td>
                    <%
                    if lazylibrarian.TORZNAB1 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="torznab1" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host1" value="${lazylibrarian.TORZNAB_HOST1}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="torznab_api1" value="${lazylibrarian.TORZNAB_API1}" size="26" maxlength="40">
            	</td>
            </tr>
	        <tr>
               <td>
                    <%
                    if lazylibrarian.NEWZNAB2 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="newznab2" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host2" value="${lazylibrarian.NEWZNAB_HOST2}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="newznab_api2" value="${lazylibrarian.NEWZNAB_API2}" size="26" maxlength="40">
                </td>
        	    <td>
                    <%
                    if lazylibrarian.TORZNAB2 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="torznab2" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host2" value="${lazylibrarian.TORZNAB_HOST2}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="torznab_api2" value="${lazylibrarian.TORZNAB_API2}" size="26" maxlength="40">
            	</td>
            </tr>
	        <tr>
                <td>
                    <%
                    if lazylibrarian.NEWZNAB3 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="newznab3" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host3" value="${lazylibrarian.NEWZNAB_HOST3}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="newznab_api3" value="${lazylibrarian.NEWZNAB_API3}" size="26" maxlength="40">
                </td>
        	    <td>
                    <%
                    if lazylibrarian.TORZNAB3 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="torznab3" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host3" value="${lazylibrarian.TORZNAB_HOST3}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="torznab_api3" value="${lazylibrarian.TORZNAB_API3}" size="26" maxlength="40">
            	</td>
            </tr>
	        <tr>
                <td>
                    <%
                    if lazylibrarian.NEWZNAB4 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="newznab4" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host4" value="${lazylibrarian.NEWZNAB_HOST4}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="newznab_api4" value="${lazylibrarian.NEWZNAB_API4}" size="26" maxlength="40">
                </td>
        	    <td>
                    <%
                    if lazylibrarian.TORZNAB4 == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="torznab4" value=1 ${checked} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host4" value="${lazylibrarian.TORZNAB_HOST4}" size="26" maxlength="100">
		            <input type="text" placeholder="Enter API Here" name="torznab_api4" value="${lazylibrarian.TORZNAB_API4}" size="26" maxlength="40">
                </td>
            </tr>
            <tr>
                <td>
                    <h3>Torrent Providers</h3><br>
                    <%
                    if lazylibrarian.KAT == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
            		<input type="checkbox" name="kat" value=1 ${checked} style="margin-bottom:4px;" /> KAT
 	    		    <input type="text" placeholder="Enter Host Here" name="kat_host" value="${lazylibrarian.KAT_HOST}" size="18" maxlength="50">
 	    		</td>
                <td>
                    <small>Current limitation: TORZNAB results are returned as magnet links
                    where possible, which may not work automatically with blackhole
                    </small>
            	</td>
            </tr>
        </table>
        </div>
    </div>

    <div class="table_wrapper" style="display:none">
        <div class="tabs-5">
        <table class="configtable" summary="Search & Processing">
            <tr>
                <td>
                    <h3>Intervals</h3>
                </td>
            </tr>
            <tr>
                <td>
                    <div>
                    <label>NZB Scan Interval:</label>
                    <input type="text" name="search_interval" value="${lazylibrarian.SEARCH_INTERVAL}" size="8" maxlength="8"> (mins)
                    </div>
                    <div>
                    <label>Post-Processing Interval:</label>
                    <input type="text" name="scan_interval" value="${lazylibrarian.SCAN_INTERVAL}" size="8" maxlength="8"> (mins)
                    </div>
                    <div>
                    <label>Version Check Interval:</label>
                    <input type="text" name="versioncheck_interval" value="${lazylibrarian.VERSIONCHECK_INTERVAL}" size="8" maxlength="4"> (hours)
                    </div>
                    <small>
                    <BR>
                    Changes to the scan intervals only take effect when the jobs are restarted
                    </small>
                </td>
                <td>
                    <div>
                    <label>Cache expire after:</label>
                    <input type="text" name="cache_age"  value="${lazylibrarian.CACHE_AGE}" size="8" maxlength="4"> (days)
                    </div>
                    <div>
                    <label>Match Ratio:</label>
                    <input type="text" name="match_ratio"  value="${lazylibrarian.MATCH_RATIO}" size="8" maxlength="4"> (percent)
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <h3>Folders</h3>
                </td>
            </tr>
            <tr>
                <td>
                    <div>
                    <label>Base Destination Folder:</label>
                    <input type="text" name="destination_dir" value="${lazylibrarian.DESTINATION_DIR}" size="26">
                    </div>
                    <BR>
                </td>
                <td>
                <label>Alternate Import/Export Folder:</label>
                <input type="text" name="alternate_dir" value="${lazylibrarian.ALTERNATE_DIR}" size="26">
                <BR>
                <small>Directory for wishlists and manually importing books</small>
                </td>
            </tr>
            <tr>
                <td>
                    <label>eBook Destination Folder:</label>
                    <input type="text" name="ebook_dest_folder" value="${lazylibrarian.EBOOK_DEST_FOLDER}" size="26" maxlength="100">
                    <br><label>eBook Destination File:</label>
                    <input type="text" name="ebook_dest_file" value="${lazylibrarian.EBOOK_DEST_FILE}" size="26" maxlength="40">
                    <BR>
                    <small>Options include $Author, $Title, any string
                    <BR>
                    Current limitation: each file has to be in unique subfolder
                    </small>
                    <div>
                    <%
                    if lazylibrarian.DESTINATION_COPY == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="destination_copy" value=1 ${checked} /><label>Keep original files</label>
                    </div>
                </td>
                <td>
		            <label>Magazine Destination Folder:</label>
		            <input type="text" name="mag_dest_folder" value="${lazylibrarian.MAG_DEST_FOLDER}" size="26" maxlength="100">
                    <br><label>Magazine Destination File:</label>
                    <input type="text" name="mag_dest_file" value="${lazylibrarian.MAG_DEST_FILE}" size="26" maxlength="40">
                    <BR>
                    <small>Options include $Title, $IssueDate, any string</small>
                    <BR>
                    <%
                    if lazylibrarian.MAG_RELATIVE == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                    <input type="checkbox" name="mag_relative" value=1 ${checked} /><label>Magazines inside book folder</label>
		            <BR>
                    <small>Current limitation: each magazine has to be in unique subfolder
		            <BR>
		            If inside book folder, magazine folder must start with _
                    </small>
                </td>
            </tr>
            <tr>
                <td>
                    <label>Calibre Auto Add:</label>
                    <input type="text" name="imp_autoadd" value="${lazylibrarian.IMP_AUTOADD}" size="26" maxlength="90">
                    <BR>
                    <small>Directory for a copy to be placed for auto add process</small>
                  <div>
                    <%
                    if lazylibrarian.FULL_SCAN == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                  <label>Full Scan:</label><input type="checkbox" name="full_scan" id="fullscan" value=1 ${checked} />
                  <br>
                    <small>This will remove entries if ebooks are not found in the download location</small> 
                </div>
               </td>
               <td>
                    <label>Convert program:</label>
                    <input type="text" placeholder="convert program" name="imp_convert" value="${lazylibrarian.IMP_CONVERT}" size="26" maxlength="90">
                    <BR>
                    <small>Program for creating magazine covers (example: ImageMagick "convert")
                    <BR>Leave blank to use PythonMagick or Wand interfaces to ImageMagick, put
                    None  to disable cover creation</small>
                </td>
            </tr>
            <tr>                
                <td>
                <div>
                    <%
                    if lazylibrarian.IMP_SINGLEBOOK == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                  <label>One book per directory:</label><input type="checkbox" name="imp_singlebook" value=1 ${checked} />
                  <br>
                  <small>This imports one book per directory, tick if you keep multiple formats of the same book in the same directory</small>
                  </div>
                </td>
                <td> 
                  <div>
                    <%
                    if lazylibrarian.ADD_AUTHOR == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                  <label>Add Authors:</label><input type="checkbox" name="add_author" value=1 ${checked} />
                  <br>
                  <small>This will auto add new authors from GoodReads</small>
                  </div>
                </td>
            </tr>
   	        <tr>
                <td>
                  <label>Missing Book Status:</label>
                  <select name="notfound_status"  style="float:right;">
                  %for nf_status in config['status_list']:
                  <%
                        selected = ''
                        if nf_status == lazylibrarian.NOTFOUND_STATUS:
                                selected = 'selected="selected"'
                  %>
                  <option value="${nf_status}" ${selected}>${nf_status}</option>
                  %endfor
                  </select>
                  <br>
                  <small>Status for missing/deleted ebooks</small>
                </td>
                <td>
                  <label>New Book Status:</label>
                  <select name="newbook_status"  style="float:right;">
                  %for nb_status in config['status_list']:
                  <%
                        selected = ''
                        if nb_status == lazylibrarian.NEWBOOK_STATUS:
                                selected = 'selected="selected"'
                  %>
                  <option value="${nb_status}" ${selected}>${nb_status}</option>
                  %endfor
                  </select>
                  <br>
                  <small>Status for new ebooks</small>
                  </div>
                </td>
            </tr>
        </table>
        </div>
    </div>

    <div class="table_wrapper" style="display:none">
        <div class="tabs-6">
        <table class="configtable" summary="Notifications">
        <tr>
            <td>
                <fieldset>
                    <h3>Twitter</h3>
                    <div class="row checkbox">
                    <%
                    if lazylibrarian.USE_TWITTER == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                        <input type="checkbox" name="use_twitter" id="twitter" value="1" ${checked} />
                        <label>Enable Twitter Notifications</label>
                    </div>
                    <div id="twitteroptions">
                        <div class="row">
                    <%
                    if lazylibrarian.TWITTER_NOTIFY_ONSNATCH == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="twitter_notify_onsnatch" value="1" ${checked} />Notify on snatch
                        </div>
                        <div class="row">
                    <%
                    if lazylibrarian.TWITTER_NOTIFY_ONDOWNLOAD == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="twitter_notify_ondownload" value="1" ${checked} />Notify on download
                        </div>
                        <div class="row">
                            <input type="button" value="Request Authorization" id="twitterStep1" />
                        </div>
                        <div class="row">
                            <input type="text" id="twitter_key" value="" size="26" placeholder="Input Authorization Key"/>
                        </div>
                        <div class="row">        
                            <input type="button" value="Verify Key" id="twitterStep2" />
                        </div>
                        <div class="row">
                            <input type="button" value="Test Twitter" id="testTwitter" />
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <BR>
                    <h3>Boxcar2</h3>
                    <div class="row checkbox">
                    <%
                    if lazylibrarian.USE_BOXCAR == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                        <input type="checkbox" name="use_boxcar" id="boxcar" value="1" ${checked} />
                        <label>Enable boxcar Notifications</label>
                    </div>
                    <div id="boxcaroptions">
                        <div class="row">
                    <%
                    if lazylibrarian.BOXCAR_NOTIFY_ONSNATCH == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="boxcar_notify_onsnatch" value="1" ${checked} />Notify on snatch
                        </div>
                        <div class="row">    
                    <%
                    if lazylibrarian.BOXCAR_NOTIFY_ONDOWNLOAD == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="boxcar_notify_ondownload" value="1" ${checked} />Notify on download
                        </div>
                        <div class="row">
                            <input type="text" name="boxcar_token" value="${lazylibrarian.BOXCAR_TOKEN}" size="26" placeholder="Boxcar token">
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <BR>
                    <h3>Pushbullet</h3>
                    <div class="row checkbox">
                    <%
                    if lazylibrarian.USE_PUSHBULLET == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                        <input type="checkbox" name="use_pushbullet" id="pushbullet" value="1" ${checked} />
                        <label>Enable Pushbullet Notifications</label>
                    </div>
                    <div id="pushbulletoptions">
                        <div class="row">
                    <%
                    if lazylibrarian.PUSHBULLET_NOTIFY_ONSNATCH == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="pushbullet_notify_onsnatch" value="1" ${checked} />Notify on snatch
                        </div>
                        <div class="row">    
                    <%
                    if lazylibrarian.PUSHBULLET_NOTIFY_ONDOWNLOAD == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="pushbullet_notify_ondownload" value="1" ${checked} />Notify on download
                        </div>
                        <div class="row">
                            <input type="text" name="pushbullet_token" value="${lazylibrarian.PUSHBULLET_TOKEN}" size="26" placeholder="Pushbullet API">
                        </div>
                        <div class="row">
                            <input type="text" name="pushbullet_deviceid" value="${lazylibrarian.PUSHBULLET_DEVICEID}" size="26" placeholder="Pushbullet DeviceID">
                        </div>                        
                        <div class="row">
                            <input type="button" value="Test Pushbullet" id="testPushbullet">
                        </div>
                     </div>
                </fieldset>            
            </td>
            <td>
                <fieldset>
                    <h3>Pushover</h3>
                    <div class="row checkbox">
                    <%
                    if lazylibrarian.USE_PUSHOVER == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                        <input type="checkbox" name="use_pushover" id="pushover" value="1" ${checked} />
                        <label>Enable Pushover Notifications</label>
                    </div>
                    <div id="pushoveroptions">
                        <div class="row">
                    <%
                    if lazylibrarian.PUSHOVER_ONSNATCH == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="pushover_onsnatch" value="1" ${checked} />Notify on snatch
                        </div>
			            <div class="row">
                    <%
                    if lazylibrarian.PUSHOVER_ONDOWNLOAD == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
			                <input type="checkbox" name="pushover_ondownload" value="1" ${checked} />Notify on download
			            </div>
                        <div class="row">
                            <input type="text" name="pushover_apitoken" value="${lazylibrarian.PUSHOVER_APITOKEN}" size="26" placeholder="Pushover API Token">
                        </div>
                        <div class="row">
                            <input type="text" name="pushover_keys" value="${lazylibrarian.PUSHOVER_KEYS}" size="26" placeholder="Pushover Keys">
                        </div>
                        <div class="row">
                            <input type="text" name="pushover_device" value="${lazylibrarian.PUSHOVER_DEVICE}" size="26" placeholder="Pushover Device">
                        </div>                        
                        <div class="row">
                            <input type="text" name="pushover_priority" value="${lazylibrarian.PUSHOVER_PRIORITY}" size="26" placeholder="Pushover Priority">
                        </div>
                        <div class="row">
                            <input type="button" value="Test Pushover" id="testPushover">
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <BR>
                    <h3>AndroidPN</h3>
                    <div class="row checkbox">
                    <%
                    if lazylibrarian.USE_ANDROIDPN == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                        <input type="checkbox" name="use_androidpn" id="androidpn" value="1" ${checked} />
                        <label>Enable AndroidPN Notifications</label>
                    </div>
                    <div id="androidpnoptions">
                        <div class="row">
                    <%
                    if lazylibrarian.ANDROIDPN_NOTIFY_ONSNATCH == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="androidpn_notify_onsnatch" value="1" ${checked} />Notify on snatch
                        </div>
                        <div class="row">
                    <%
                    if lazylibrarian.ANDROIDPN_NOTIFY_ONDOWNLOAD == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="androidpn_notify_ondownload" value="1" ${checked} />Notify on download
                        </div>
                        <div class="row">
                    <%
                    if lazylibrarian.ANDROIDPN_BROADCAST == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                            <input type="checkbox" name="androidpn_broadcast" id="androidpn_broadcast" value="1" ${checked} />Broadcast notification
                        </div>
                        <div class="row">
                            <input type="text" name="androidpn_url" value="${lazylibrarian.ANDROIDPN_URL}" size="26" placeholder="AndroidPN notification url" />
                        </div>
                        <div class="row" id="androidpn_username">
                           <input type="text" name="androidpn_username"  value="${lazylibrarian.ANDROIDPN_USERNAME}" size="26" placeholder="AndroidPN username" /> 
                        </div>
                        <div class="row">
                            <input type="button" value="Test AndroidPN" id="testAndroidPN">
                        </div>
                    </div>
                </fieldset>
            	<fieldset>
            	    <BR>
                    <h3>NotifyMyAndroid</h3>
                    <div class="checkbox row">
                    <%
                    if lazylibrarian.USE_NMA == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                                    <input type="checkbox" name="use_nma" id="nma" value="1" ${checked} /><label>Enable NotifyMyAndroid</label>
                                </div>
                                <div id="nmaoptions">
                                    <div class="row checkbox">
                    <%
                    if lazylibrarian.NMA_ONSNATCH == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                                        <input type="checkbox" name="nma_onsnatch" value="1" ${checked} /><label>Notify on snatch?</label>
                                    </div>
                                    <div class="row checkbox">
                    <%
                    if lazylibrarian.NMA_ONDOWNLOAD == True:
                        checked = 'checked="checked"'
                    else:
                        checked = ''
                    %>
                                        <input type="checkbox" name="nma_ondownload" value="1" ${checked} /><label>Notify on download?</label>
                                    </div>
                                    <div class="row">
                                        <label>NotifyMyAndroid API Key</label>
                                        <input type="text" name="nma_apikey" value="${lazylibrarian.NMA_APIKEY}" size="26">
                                        <br><small>Separate multiple api keys with commas</small>
                                    </div>
                                    <div class="row">
                                        <label>Priority</label>
                                        <select name="nma_priority">
                                        %for x in [-2,-1,0,1,2]:
                                        <%
                                            if lazylibrarian.NMA_PRIORITY == x:
                                                nma_priority_selected = 'selected'
                                            else:
                                                nma_priority_selected = ''

                                            if x == -2:
                                                nma_priority_value = 'Very Low'
                                            elif x == -1:
                                                nma_priority_value = 'Moderate'
                                            elif x == 0:
                                                nma_priority_value = 'Normal'
                                            elif x == 1:
                                                nma_priority_value = 'High'
                                            else:
                                                nma_priority_value = 'Emergency'
                                        %>
                                            <option value=${x} ${nma_priority_selected}>${nma_priority_value}</option>
                                        %endfor
                                        </select>
                                    </div>
                                    <div class="row">
                                        <input type="button" value="Test NMA" id="testNMA">
                                    </div>
                                </div>
		</fieldset>
            </td>
        </table>
        </div>
    </div>

    <div class="table_wrapper_button">
        <p><input type="submit" value="Save changes" id="add" style="float:right;"></p>
    </div>
    <p style="text-align:center;position:fixed;bottom:10px;margin-left:20px;color:grey">Branch: ${lazylibrarian.CURRENT_BRANCH} Current Version: ${lazylibrarian.CURRENT_VERSION}  : Latest  Version: ${lazylibrarian.LATEST_VERSION}</p>
    </div>
</form>
</%def>

<%def name="javascriptIncludes()">
    <script>
        function initThisPage()

        {
            if ($("#nzb").is(":checked"))
                    {
                            $("#usenet_options").show();
                    }
            else
                    {
                            $("#usenet_options").hide();
                    }

            $("#nzb").click(function(){
                    if ($("#nzb").is(":checked"))
                    {
                            $("#usenet_options").slideDown();
                    }
                    else
                    {
                            $("#usenet_options").slideUp();
                    }
            });
            if ($("#tor").is(":checked"))
                    {
                            $("#torrent_options").show();
                    }
            else
                    {
                            $("#torrent_options").hide();
                    }

            $("#tor").click(function(){
                    if ($("#tor").is(":checked"))
                    {
                            $("#torrent_options").slideDown();
                    }
                    else
                    {
                            $("#torrent_options").slideUp();
                    }
            });

            if ($("#tor_downloader_blackhole").is(":checked"))
                {
                        $("#tor_blackhole_options").show();
                }
            else
                {
                        $("#tor_blackhole_options").hide();
                }

            $("#tor_downloader_blackhole").click(function(){
                    if ($("#tor_downloader_blackhole").is(":checked"))
                    {
                            $("#tor_blackhole_options").slideDown();
                    }
                    else
                    {
                            $("#tor_blackhole_options").slideUp();
                    }
            });

            if ($("#tor_downloader_deluge").is(":checked"))
                {
                        $("#deluge_options").show();
                }
            else
                {
                        $("#deluge_options").hide();
                }
            $("#tor_downloader_deluge").click(function(){
                    if ($("#tor_downloader_deluge").is(":checked"))
                    {
                            $("#deluge_options").slideDown();
                    }
                    else
                    {
                            $("#deluge_options").slideUp();
                    }
            });

            if ($("#tor_downloader_transmission").is(":checked"))
                {
                        $("#transmission_options").show();
                }
            else
                {
                        $("#transmission_options").hide();
                }
            $("#tor_downloader_transmission").click(function(){
                    if ($("#tor_downloader_transmission").is(":checked"))
                    {
                            $("#transmission_options").slideDown();
                    }
                    else
                    {
                            $("#transmission_options").slideUp();
                    }
            });

            if ($("#tor_downloader_utorrent").is(":checked"))
                {
                        $("#utorrent_options").show();
                }
            else
                {
                        $("#utorrent_options").hide();
                }

            $("#tor_downloader_utorrent").click(function(){
                    if ($("#tor_downloader_utorrent").is(":checked"))
                    {
                            $("#utorrent_options").slideDown();
                    }
                    else
                    {
                            $("#utorrent_options").slideUp();
                    }
            });

            if ($("#nzb_downloader_blackhole").is(":checked"))
                {
                        $("#nzb_blackhole_options").show();
                }
            else
                {
                        $("#nzb_blackhole_options").hide();
                }

            $("#nzb_downloader_blackhole").click(function(){
                    if ($("#nzb_downloader_blackhole").is(":checked"))
                    {
                            $("#nzb_blackhole_options").slideDown();
                    }
                    else
                    {
                            $("#nzb_blackhole_options").slideUp();
                    }
            });

            if ($("#nzb_downloader_sabnzbd").is(":checked"))
                {
                        $("#sabnzbd_options").show();
                }
            else
                {
                        $("#sabnzbd_options").hide();
                }
            $("#nzb_downloader_sabnzbd").click(function(){
                    if ($("#nzb_downloader_sabnzbd").is(":checked"))
                    {
                            $("#sabnzbd_options").slideDown();
                    }
                    else
                    {
                            $("#sabnzbd_options").slideUp();
                    }
            });

            if ($("#nzb_downloader_nzbget").is(":checked"))
                {
                        $("#nzbget_options").show();
                }
            else
                {
                        $("#nzbget_options").hide();
                }
            $("#nzb_downloader_nzbget").click(function(){
                    if ($("#nzb_downloader_nzbget").is(":checked"))
                    {
                            $("#nzbget_options").slideDown();
                    }
                    else
                    {
                            $("#nzbget_options").slideUp();
                    }
            });

            if ($("#twitter").is(":checked"))
                    {
                            $("#twitteroptions").show();
                    }
            else
                    {
                            $("#twitteroptions").hide();
                    }

            $("#twitter").click(function(){
                    if ($("#twitter").is(":checked"))
                    {
                            $("#twitteroptions").slideDown();
                    }
                    else
                    {
                            $("#twitteroptions").slideUp();
                    }
            });
        
            if ($("#boxcar").is(":checked"))
                    {
                            $("#boxcaroptions").show();
                    }
            else
                    {
                            $("#boxcaroptions").hide();
                    }

            $("#boxcar").click(function(){
                    if ($("#boxcar").is(":checked"))
                    {
                            $("#boxcaroptions").slideDown();
                    }
                    else
                    {
                            $("#boxcaroptions").slideUp();
                    }
            });

            if ($("#fullscan").is(":checked"))
                    {
                            $("#fullscanoptions").show();
                    }
            else
                    {
                            $("#fullscanoptions").hide();
                    }

            $("#fullscan").click(function(){
                    if ($("#fullscan").is(":checked"))
                    {
                            $("#fullscanoptions").slideDown();
                    }
                    else
                    {
                            $("#fullscanoptions").slideUp();
                    }
            });

            if ($("#pushbullet").is(":checked"))
                    {
                            $("#pushbulletoptions").show();
                    }
            else
                    {
                            $("#pushbulletoptions").hide();
                    }

            $("#pushbullet").click(function(){
                    if ($("#pushbullet").is(":checked"))
                    {
                            $("#pushbulletoptions").slideDown();
                    }
                    else
                    {
                            $("#pushbulletoptions").slideUp();
                    }
            });

            if ($("#pushover").is(":checked"))
                    {
                            $("#pushoveroptions").show();
                    }
            else
                    {
                            $("#pushoveroptions").hide();
                    }
            $("#pushover").click(function(){
                    if ($("#pushover").is(":checked"))
                    {
                            $("#pushoveroptions").slideDown();
                    }
                    else
                    {
                            $("#pushoveroptions").slideUp();
                    }
            });

            if ($("#androidpn").is(":checked"))
                    {
                            $("#androidpnoptions").show();
                    }
            else
                    {
                            $("#androidpnoptions").hide();
                    }
            $("#androidpn").click(function(){
                    if ($("#androidpn").is(":checked"))
                    {
                        $("#androidpnoptions").slideDown();
                    }
                    else
                    {
                        $("#androidpnoptions").slideUp();
                    }
            });

            if ($("#androidpn_broadcast").is(":checked"))
                    {
                            $("#androidpn_username").hide();
                    }
            else
                    {
                            $("#androidpn_username").show();
                    }
            $("#androidpn_broadcast").click(function(){
                    if ($("#androidpn_broadcast").is(":checked"))
                    {
                        $("#androidpn_username").slideUp();
                    }
                    else
                    {
                        $("#androidpn_username").slideDown();
                    }
            });
    
                if ($("#nma").is(":checked"))
                        {
                                $("#nmaoptions").show();
                        }
                else
                        {
                                $("#nmaoptions").hide();
                        }

                $("#nma").click(function(){
                        if ($("#nma").is(":checked"))
                        {
                                $("#nmaoptions").slideDown();
                        }
                        else
                        {
                                $("#nmaoptions").slideUp();
                        }
                });
            
            $('#twitterStep1').click(function () {
                $('#testTwitter-result').html('');
                $.get("twitterStep1", function (data) {window.open(data); })
                    .done(function () { $('#testTwitter-result').html('<b>Step1:</b> Confirm Authorization'); });
            });

            $('#twitterStep2').click(function () {
                $('#testTwitter-result').html('');
                var twitter_key = $("#twitter_key").val();
                $.get("twitterStep2", {'key': twitter_key},
                    function (data) { $('#testTwitter-result').html(data); });
            });

            $('#testTwitter').click(function () {
                $.get("testTwitter",
                    function (data) { $('#testTwitter-result').html(data); });
            });

            $('#testPushbullet').click(function () {
                $.get("testPushbullet",
                    function (data) { window.alert(data) });
                    
            });

            $('#testPushover').click(function () {
                $.get("testPushover",
                    function (data) { window.alert(data) });
                    
            });

            $('#testNMA').click(function () {
                $.get("testNMA",
                    function (data) { window.alert(data) });
            });

            $("#testAndroidPN").click(function () {
                var androidpn_url = $.trim($("#androidpn_url").val());
                var androidpn_username = $.trim($("#androidpn_username").val());
                var androidpn_broadcast = ($("#androidpn_broadcast").prop('checked') == true) ? 'Y' : 'N';
                $.get("/testAndroidPN", {'url': androidpn_url, 'username': androidpn_username, 'broadcast': androidpn_broadcast})
                    .done(function (data) {
                        $("#testAndroidPN-result").html(data);
                    });
                });
        }

        $(document).ready(function() {
            initThisPage();
        });
    </script>
</%def>
