<%inherit file="base.html"/>
<%!
    import lazylibrarian
%>

<%def name="headerIncludes()">
    <div id="subhead_container">
        <ul id="subhead_menu">
            <li><a onclick="self.shutdownQA(this)" id="button">Shutdown</a></li>
            <li><a id="button" onclick="self.restartQA(this, '', '')">Restart</a></li>
            <li ><a id="button" href="checkForUpdates">Check for Updates</a></li>
            <li ><a id="button" href="showJobs">Show Job Status</a></li>
            <li ><a id="button" href="restartJobs">Restart Jobs</a></li>
        </ul>
    </div>
</%def>
<%def name="body()">
    <form action="configUpdate" method="post">
    <div id="form">
    <div id="tabs">
        <ul>
            <li id="tabs1" class="active"><a  href="#tabs-1" onclick="$('#tabs2').removeClass('active');$('#tabs3').removeClass('active');$('#tabs4').removeClass('active');$('#tabs5').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-1').parent().show();$('#tabs1').addClass('active');">Web Interface</a></li>
            <li id="tabs2" ><a  href="#tabs-2" onclick="$('#tabs1').removeClass('active');$('#tabs3').removeClass('active');$('#tabs4').removeClass('active');$('#tabs5').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-2').parent().show();$('#tabs2').addClass('active');">Import Options</a></li>
            <li id="tabs3" ><a  href="#tabs-3" onclick="$('#tabs1').removeClass('active');$('#tabs2').removeClass('active');$('#tabs4').removeClass('active');$('#tabs5').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-3').parent().show();$('#tabs3').addClass('active');">Download Settings</a></li>
            <li id="tabs4" ><a  href="#tabs-4" onclick="$('#tabs1').removeClass('active');$('#tabs2').removeClass('active');$('#tabs3').removeClass('active');$('#tabs5').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-4').parent().show();$('#tabs4').addClass('active');">Providers</a></li>
            <li id="tabs5" ><a  href="#tabs-5" onclick="$('#tabs1').removeClass('active');$('#tabs2').removeClass('active');$('#tabs3').removeClass('active');$('#tabs4').removeClass('active');$('#tabs6').removeClass('active');$('.table_wrapper').hide();$('.tabs-5').parent().show();$('#tabs5').addClass('active');">Search & Processing</a></li>
            <li id="tabs6" ><a  href="#tabs-6" onclick="$('#tabs1').removeClass('active');$('#tabs2').removeClass('active');$('#tabs3').removeClass('active');$('#tabs4').removeClass('active');$('#tabs5').removeClass('active');$('.table_wrapper').hide();$('.tabs-6').parent().show();$('#tabs6').addClass('active');">Notifications</a></li>
        </ul>
    </div>
    <div class="table_wrapper">
        
        <div class="tabs-1">
        <table class="configtable" summary="Webinterface">
            <tr>
                <td>
                  <div>
                  <label>Hostname:</label><input type="text" name="http_host" value="${config['http_host']}" size="20" maxlength="40">
                  </div>
                  <div>
                  <label>Port:</label><input type="text" name="http_port" value="${config['http_port']}" size="10" maxlength="40">
                  </div>
		  <label>Web Root:</label><input type="text" name="http_root" value="${config['http_root']}" size="20" maxlength="40">
		  </div>
                  <br>
                  <br>
                  <label>Logdir:</label><input type="text" name="logdir" value="${config['logdir']}" size="50"><br>
		  <br>
		  <br>
		  <div>
		  <label>Proxy Host:</label><input type="text" name="proxy_host" value="${config['proxy_host']}" size="20"><br>
		  <i class="smalltext">Set this value if you are behind a proxy</i>
		  </div>
		  <br>
		  <div>
		  <label>Proxy Type:</label><input type="text" name="proxy_type" value="${config['proxy_type']}" size="10"><br>
                  <i class="smalltext">http, https, etc</i>
		  </div>
                </td>
                <td>
                    <div>
                  <label>Username:</label><input type="text" name="http_user" value="${config['http_user']}" size="20" maxlength="40">
                  </div>
                  <div>
                  <label>Password:</label><input type="password" name="http_pass" value="${config['http_pass']}" size="20" maxlength="40">
                  </div>
                </td>
                <td>
                    <h5><input type="checkbox" name="launch_browser" value=1 ${config['launch_browser']} /> Launch browser</h5>
                    <br>
                    <h5>Interface: <select name="http_look"><h5>
                    %for http_look in config['http_look_list']:
                        <%
                            if http_look == lazylibrarian.HTTP_LOOK:
                                selected = 'selected="selected"'
                            else:
                                selected = ''
                        %>
                        <option value="${http_look}" ${selected}>${http_look}</option>
                    %endfor
                    </select>
                </td>
            </tr>
        </table>
        </div>
    </div>


   <div class="table_wrapper" style="display:none">
        <div class="tabs-2">
        <table class="configtable" summary="Importsettings">
            <tr>
                <td>
                    <h3>Book API</h3>
                    <BR>
                    <%
                        if lazylibrarian.BOOK_API == "GoodReads":
                            gr_selected = 'selected="selected"'
                        else:
                            gr_selected = ''

                        if lazylibrarian.BOOK_API == "GoogleBooks":
                            gb_selected = 'selected="selected"'
                        else:
                            gb_selected = ''
                    %>
                    <label>Book Search API: .....</label><select name="book_api">
                    <option value = "GoodReads" ${gr_selected}>GoodReads</option>
                    <option value = "GoogleBooks" ${gb_selected}>GoogleBooks</option>
                    </select>
                    <BR>
                    <label>Goodreads API:</label><input type="text" name="gr_api" value="${config['gr_api']}" size="40" maxlength="40" >
                    <BR>
                    <label>GoogleBooks API:</label><input type="text" name="gb_api" value="${config['gb_api']}" size="40" maxlength="40" >
                </td>
                <td>
                    <h3>Language</h3>
                    <BR>
                    <label>Import languages:</label><input type="text" name="imp_preflang" value="${config['imp_preflang']}" size="20" maxlength="40">
                    <br>
                    <i class="smalltext">Comma separated country shortcodes:
                    <br> GoodReads e.g: eng, en-US, spa, ita
                    <BR> GoogleBooks e.g: en, es, it
                    <BR> Default: en, eng, en-US
                    <BR> Try adding "Unknown" to list if GoodReads is missing results</i>
		    <BR><BR>
                    <label>Languages for month names:</label><input type="text" name="imp_monthlang" value="${config['imp_monthlang']}" size="20" maxlength="40">
                    <br><i class="smalltext">Comma separated language codes for magazine issues:
                    <br> e.g: en_US.uf8, fr_FR.utf8, es_ES.utf8        
                    <BR>Default: en_US.utf8   Changes to this setting require a restart</i>
                </td>
                <td>
                    <h3>File Formats</h3>
                    <BR>
                    <label>Ebook Format:</label><input type="text" name="ebook_type" value="${config['ebook_type']}" size="0" maxlength="40">
                    <br>
                    <i class="smalltext">Comma separated file extensions:
                    <BR>Default: epub, mobi, pdf </i>
                </td>
            </tr>
        </table>
        </div>
    </div>


    <div class="table_wrapper" style="display:none">
        <div class="tabs-3">
        <table class="configtable" summary="Downloadsettings">
            <tr>
                <td>
                    <fieldset>
                        <h3>Usenet</h3>
                        <div class="row checkbox">
                            <input type="checkbox" name="use_nzb" id="nzb" value="1" ${config['use_nzb']} />
                            <label>Enable NZB Search</label>
                        </div>
                        <fieldset id="usenet_options">
                            <div class="row checkbox">
                                <input type="checkbox" name="nzb_downloader_sabnzbd" id="nzb_downloader_sabnzbd" value="1" ${config['nzb_downloader_sabnzbd']} />
                                <label>Use Sabnzbd+</label>
                            </div>
                            <fieldset id="sabnzbd_options">
                                <div class="row">
                                    <label>SABnzbd Host:</label>
                                    <input type="text" name="sab_host" value="${config['sab_host']}" size="30" align="right">
                                </div>
                                <div class="row">
                                    <label>SABnzbd Port:</label>
                                    <input type="text" name="sab_port" value="${config['sab_port']}" size="30">
                                </div>
                                <div class="row">
                                    <label>SABnzbd Username</label>
                                    <input type="text" name="sab_user" value="${config['sab_user']}" size="30">
                                </div>
                                <div class="row">
                                    <label>SABnzbd Password:</label>
                                    <input type="password" name="sab_pass" value="${config['sab_pass']}" size="30">
                                </div>
                                <div class="row">
                                    <label>SABnzbd API:</label>
                                    <input type="text" name="sab_api" value="${config['sab_api']}" size="30">
                                </div>
                                <div class="row">
                                    <label>SABnzbd Category:</label>
                                    <input type="text" name="sab_cat" value="${config['sab_cat']}" size="30">
                                </div>
                                <div class="row">
                                    <label>SABnzbd SubDir:</label>
                                    <input type="text" name="sab_subdir" value="${config['sab_subdir']}" size="30">
                                </div>
				<div class="row">
				    <label>Retention Max Age:</label>
				    <input type="text" name="usenet_retention" value="${config['usenet_retention']}" size="30">
				</div>
                            </fieldset>

                            <div class="row checkbox">
                                <input type="checkbox" name="nzb_downloader_nzbget" id="nzb_downloader_nzbget" value="1" ${config['nzb_downloader_nzbget']} />
                                <label>Use NZBGet</label>
                            </div>
                            <fieldset id="nzbget_options">
                                <div class="row">
                                    <label>NZBGet Host:</label>
                                    <input type="text" name="nzbget_host" value="${config['nzbget_host']}" size="30" align="right">
                                </div>
                                <div class="row">
                                    <label>NZBGet Username</label>
                                    <input type="text" name="nzbget_user" value="${config['nzbget_user']}" size="30">
                                </div>
                                <div class="row">
                                    <label>NZBGet Password:</label>
                                    <input type="password" name="nzbget_pass" value="${config['nzbget_pass']}" size="30">
                                </div>
                                <div class="row">
                                    <label>NZBGet Category:</label>
                                    <input type="text" name="nzbget_cat" value="${config['nzbget_cat']}" size="30">
                                </div>
                                <div class="row">
                                    <label>NZBGet Priority:</label>
                                    <input type="text" name="nzbget_priority" value="${config['nzbget_priority']}" size="30">
                                </div>
                            </fieldset>

                            <div class="row checkbox">
                                 <input type="checkbox" name="nzb_downloader_blackhole" id="nzb_downloader_blackhole" value="1" ${config['nzb_downloader_blackhole']} />
                                 <label>Use NZB Blackhole</label>
                            </div>
                            <fieldset id="nzb_blackhole_options">
                                <div class="row">
                                    <label>NZB Blackhole Directory:</label>
                                    <input type="text" name="nzb_blackholedir" value="${config['nzb_blackholedir']}" size="30">
                            </fieldset>
                        </fieldset>
                    </fieldset>
                </td>
                <td>
                    <fieldset>
                        <h3>Torrents</h3>
                        <div class="row checkbox">
                            <input type="checkbox" name="use_tor" id="tor" value="1" ${config['use_tor']} />
                            <label>Enable Torrent Search</label>
                        </div>
                        <fieldset id="torrent_options">

                            <div>
                                <label>Minimum seeders:</label>
                                <input type="text" name="numberofseeders" value="${config['numberofseeders']}" size="5">
                                <BR>
                                <small>Number of minimum seeders a torrent must have to be accepted</small>
                            </div>
                             <div class="row checkbox">
                                <input type="checkbox" name="tor_downloader_deluge" id="tor_downloader_deluge" value="1" ${config['tor_downloader_deluge']} />
                                <label>Use Deluge</label>
                            </div>
                            <fieldset id="deluge_options">
                                <div class="row">
                                    <label>Deluge Host:</label>
                                    <input type="text" name="deluge_host" value="${config['deluge_host']}" size="30">
                                </div>
                                <div class="row">
                                    <label>Deluge Port:</label>
                                    <input type="text" name="deluge_port" value="${config['deluge_port']}" size="30">
                                </div>
                                <div class="row">
                                    <label>Deluge Username:</label>
                                    <input type="text" name="deluge_user" value="${config['deluge_user']}" size="30">
                                </div>
                                <div class="row">
                                    <label>Deluge Password:</label>
                                    <input type="password" name="deluge_pass" value="${config['deluge_pass']}" size="30">
                                </div>
                            </fieldset>

                             <div class="row checkbox">
                                <input type="checkbox" name="tor_downloader_transmission" id="tor_downloader_transmission" value="1" ${config['tor_downloader_transmission']} />
                                <label>Use Transmission</label>
                            </div>
                            <fieldset id="transmission_options">
                                <div class="row">
                                    <label>Transmission Host:port :</label>
                                    <input type="text" name="transmission_host" value="${config['transmission_host']}" size="30">
                                </div>
                                <div class="row">
                                    <label>Transmission Username :</label>
                                    <input type="text" name="transmission_user" value="${config['transmission_user']}" size="30">
                                </div>
                                <div class="row">
                                    <label>Transmission Password :</label>
                                    <input type="password" name="transmission_pass" value="${config['transmission_pass']}" size="30">
                                </div>
                            </fieldset>

                             <div class="row checkbox">
                                <input type="checkbox" name="tor_downloader_utorrent" id="tor_downloader_utorrent" value="1" ${config['tor_downloader_utorrent']} />
                                <label>Use uTorrent</label>
                            </div>
                            <fieldset id="utorrent_options">
                                <div class="row">
                                    <label>uTorrent Host:</label>
                                    <input type="text" name="utorrent_host" value="${config['utorrent_host']}" size="30">
                                </div>
                                <div class="row">
                                    <label>uTorrent Username:</label>
                                    <input type="text" name="utorrent_user" value="${config['utorrent_user']}" size="30">
                                </div>
                                <div class="row">
                                    <label>uTorrent Password:</label>
                                    <input type="password" name="utorrent_pass" value="${config['utorrent_pass']}" size="30">
                                </div>
                                <div class="row">
                                    <label>uTorrent Label:</label>
                                    <input type="text" name="utorrent_label" value="${config['utorrent_label']}" size="30">
                                </div>
                            </fieldset>
                            <div class="row checkbox">
                                 <input type="checkbox" name="tor_downloader_blackhole" id="tor_downloader_blackhole" value="1" ${config['tor_downloader_blackhole']} />
                                 <label>Use Torrent Blackhole</label>
                            </div>
                            <fieldset id="tor_blackhole_options">
                                <div class="row">
                                    <label>Torrent Blackhole Directory:</label>
                                    <input type="text" name="torrent_dir" value="${config['torrent_dir']}" size="30">
                                </div>
                            </fieldset>
                        </fieldset>
                    </fieldset>
                </td>
                <td>
                    <fieldset>
                        <h3>Download Settings</h3>
                        <div class="row">
                            <label>Directory:</label><input type="text" name="download_dir" value="${config['download_dir']}" size="30">
                            <BR>
                            <small>Full path to the folder where books are downloaded to.</small>
                        </div>
                    </fieldset>
                </td>
            </tr>
        </table>
        </div>
    </div>

    <div class="table_wrapper" style="display:none">
        <div class="tabs-4">
        <table class="configtable" summary="Providers">
            <tr>
                <td>
                    <h3>Newznab Providers</h3>
                </td>
		<td>
		     <h3>Torznab Providers</h3>
               </td>
		<td>
            	    <h3>Torrent Providers</h3>
        	</td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" name="newznab0" value=1 ${config['use_newznab0']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host0" value="${config['newznab_host0']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="newznab_api0" value="${config['newznab_api0']}" size="26" maxlength="40">
		</td>
        	<td>
                    <input type="checkbox" name="torznab0" value=1 ${config['use_torznab0']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host0" value="${config['torznab_host0']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="torznab_api0" value="${config['torznab_api0']}" size="26" maxlength="40">
            	</td>
        	<td>
            		<input type="checkbox" name="kat" value=1 ${config['use_kat']} style="margin-bottom:4px;" /> KAT
 	    		<input type="text" placeholder="Enter Host Here" name="kat_host" value="${config['kat_host']}" size="20" maxlength="100">
        	</td>
            </tr>
	    <tr>
		<td>
                    <input type="checkbox" name="newznab1" value=1 ${config['use_newznab1']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host1" value="${config['newznab_host1']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="newznab_api1" value="${config['newznab_api1']}" size="26" maxlength="40">
                </td>
        	<td>
                    <input type="checkbox" name="torznab1" value=1 ${config['use_torznab1']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host1" value="${config['torznab_host1']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="torznab_api1" value="${config['torznab_api1']}" size="26" maxlength="40">
            	</td>
            </tr>
	    <tr>
               <td>
                    <input type="checkbox" name="newznab2" value=1 ${config['use_newznab2']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host2" value="${config['newznab_host2']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="newznab_api2" value="${config['newznab_api2']}" size="26" maxlength="40">
                </td>
        	<td>
                    <input type="checkbox" name="torznab2" value=1 ${config['use_torznab2']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host2" value="${config['torznab_host2']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="torznab_api2" value="${config['torznab_api2']}" size="26" maxlength="40">
            	</td>
            </tr>
	    <tr>
                <td>
                    <input type="checkbox" name="newznab3" value=1 ${config['use_newznab3']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host3" value="${config['newznab_host3']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="newznab_api3" value="${config['newznab_api3']}" size="26" maxlength="40">
                </td>
        	<td>
                    <input type="checkbox" name="torznab3" value=1 ${config['use_torznab3']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host3" value="${config['torznab_host3']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="torznab_api3" value="${config['torznab_api3']}" size="26" maxlength="40">
            	</td>
            </tr>
	    <tr>
                <td>
                    <input type="checkbox" name="newznab4" value=1 ${config['use_newznab4']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="newznab_host4" value="${config['newznab_host4']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="newznab_api4" value="${config['newznab_api4']}" size="26" maxlength="40">
                </td>
        	<td>
                    <input type="checkbox" name="torznab4" value=1 ${config['use_torznab4']} style="margin-bottom:4px;" />
                    <input type="text" placeholder="Enter Host Here" name="torznab_host4" value="${config['torznab_host4']}" size="26" maxlength="100">
		    <input type="text" placeholder="Enter API Here" name="torznab_api4" value="${config['torznab_api4']}" size="26" maxlength="40">
            	</td>
            </tr>
        </table>
        </div>
		    <BR>
                    <small>Current limitation: TORZNAB results are returned as magnet links
                    <BR>
                    where possible, which may not work automatically with blackhole
                    </small>
    </div>

    <div class="table_wrapper" style="display:none">
        <div class="tabs-5">
        <table class="configtable" summary="Search & Processing">
            <tr>
                <td>
                    <h3>Intervals</h3>
                    <BR>
                    <div>
                    <label>NZB Scan Interval:</label><input type="text" name="search_interval" value="${config['search_interval']}" size="8" maxlength="40"> mins
                    </div>
                    <div>
                    <label>Post-Processing Interval</label><input type="text" name="scan_interval" value="${config['scan_interval']}" size="8" maxlength="40"> mins
                    </div>
                    <div>
                    <label>Version Check Interval</label><input type="text" name="versioncheck_interval" value="${config['versioncheck_interval']}" size="8" maxlength="40"> hours
                    </div>
                    <div>
                    <label>Match Ratio</label><input type="text" name="match_ratio"  value="${config['match_ratio']}" size="8" maxlength="40"> percent
                    <small>
                    <BR>
                    Changes to any of the above only take effect after restart
                    </small>
                    </div>
                </td>
                <td>
                </td>
            </tr>
            <tr>
                <td>
                    <div>
                    <label>Base Destination Folder:</label><input type="text" name="destination_dir" value="${config['destination_dir']}" size="50">
                    </div>
                    <BR>
                    <div>
                    <input type="checkbox" name="destination_copy" value=1 ${config['destination_copy']} /><label>Keep original files</label>
                    </div>
                </td>
                <td>
                <label>Alternate Import Folder:</label><input type="text" name="alternate_dir" value="${config['alternate_dir']}" size="50">
                </td>
            </tr>
            <tr>
                <td>
                    <label>eBook Destination Folder:</label><input type="text" name="ebook_dest_folder" value="${config['ebook_dest_folder']}" size="30" maxlength="100">
                    <label>eBook Destination File:</label><input type="text" name="ebook_dest_file" value="${config['ebook_dest_file']}" size="30" maxlength="40">
                    <BR>
                    <small>Options include $Author, $Title, any string
                    <BR>
                    Current limitation: each file has to be in unique subfolder
                    </small>
                </td>
                <td>
		    <label>Magazine Destination Folder:</label><input type="text" name="mag_dest_folder" value="${config['mag_dest_folder']}" size="30" maxlength="100">
                    <label>Magazine Destination File:</label><input type="text" name="mag_dest_file" value="${config['mag_dest_file']}" size="30" maxlength="40">
                    <BR>
                    <input type="checkbox" name="mag_relative" value=1 ${config['mag_relative']} /><label>Magazines inside book folder</label>
		    <BR>
                    <small>Options include $Title, $IssueDate, any string
                    <BR>
                    Current limitation: each magazine has to be in unique subfolder
		    <BR>
		    If inside book folder, magazine folder must start with _
                    </small>
                </td>
            </tr>
            <tr>
                <td>
                    <div>
                    <label>Calibre Auto Add:</label><input type="text" name="imp_autoadd" value="${config['imp_autoadd']}" size="50" maxlength="90">
                    </div>
                    <small>Directory for a copy to be placed for auto add process</small>
                </td>
                <td>
                </td>
            </tr>
	    <tr>
                <td>
                                  <div>
                  <label>Full Scan:</label><input type="checkbox" name="full_scan" id="fullscan" value=1 ${config['full_scan']} />
                  <br>
                  <i class="smalltext">This will remove entries if ebooks are not found in the download location</i>
 
                  </div>
                  <div id="fullscanoptions">
                  <label>Missing Book Status:</label>
                  <select name="notfound_status">
                  %for nf_status in config['status_list']:
                  <%
                        selected = ''
                        if nf_status == config['notfound_status']:
                                selected = 'selected="selected"'
                  %>
                  <option value="${nf_status}" ${selected}>${nf_status}</option>
                  %endfor
                  </select>
                  <br>
                  <i class="smalltext">Value to update ebooks to if missing (removed)</i>
                  <br>
                  <label>New Found Book Status:</label>
                  <select name="newbook_status">
                  %for nb_status in config['status_list']:
                  <%
                        selected = ''
                        if nb_status == config['newbook_status']:
                                selected = 'selected="selected"'
                  %>
                  <option value="${nb_status}" ${selected}>${nb_status}</option>
                  %endfor
                  </select>
                  <br>
                  <i class="smalltext">Value to update ebooks to if new book available</i>
                  </div>
                  <div>
                  <label>Add Authors:</label><input type="checkbox" name="add_author" value=1 ${config['add_author']} />
                  <br>
                  <i class="smalltext">This will auto add new authors from GoodReads</i>
                  </div>
		  <div>
                  <label>One book per directory:</label><input type="checkbox" name="imp_singlebook" value=1 ${config['imp_singlebook']} />
                  <br>
                  <i class="smalltext">This imports one book per directory, tick this if you keep multiple formats of the same book in the same directory</i>
                  </div>

		</td>
                <td>
                </td>
            </tr>
        </table>
        </div>
    </div>

    <div class="table_wrapper" style="display:none">
        <div class="tabs-6">
        <table class="configtable" summary="Notifications">
        <tr>
            <td>
                <fieldset>
                    <h3>Twitter</h3>
                    <div class="row checkbox">
                        <input type="checkbox" name="use_twitter" id="twitter" value="1" ${config['use_twitter']} />
                        <label>Enable Twitter Notifications</label>
                    </div>
                    <div id="twitteroptions">
                        <div class="row">
                            <input type="checkbox" name="twitter_notify_onsnatch" value="1" ${config['twitter_notify_onsnatch']} />Notify on snatch
                        </div>
                        <div class="row">
                            <input type="checkbox" name="twitter_notify_ondownload" value="1" ${config['twitter_notify_ondownload']} />Notify on download
                        </div>
                        <div class="row">
                            <input type="button" value="Request Authorization" id="twitterStep1" />
                        </div>
                        <div class="row">
                            <input type="text" id="twitter_key" value="" size="35" placeholder="Input Authorization Key"/>
                        </div>
                        <div class="row">        
                            <input type="button" value="Verify Key" id="twitterStep2" />
                        </div>
                        <div class="row">
                            <input type="button" value="Test Twitter" id="testTwitter" />
                        </div>
                    </div>
                </fieldset>
            </td>
            <td>
                <fieldset>
                    <h3>Boxcar2</h3>
                    <div class="row checkbox">
                        <input type="checkbox" name="use_boxcar" id="boxcar" value="1" ${config['use_boxcar']} />
                        <label>Enable boxcar Notifications</label>
                    </div>
                    <div id="boxcaroptions">
                        <div class="row">
                            <input type="checkbox" name="boxcar_notify_onsnatch" value="1" ${config['boxcar_notify_onsnatch']} />Notify on snatch
                        </div>
                        <div class="row">    
                            <input type="checkbox" name="boxcar_notify_ondownload" value="1" ${config['boxcar_notify_ondownload']} />Notify on download
                        </div>
                        <div class="row">
                            <input type="text" name="boxcar_token" value="${config['boxcar_token']}" size="35" placeholder="Boxcar token">
                        </div>
                    </div>
                </fieldset>
            </td>
            <td>
                <fieldset>
                    <h3>Pushbullet</h3>
                    <div class="row checkbox">
                        <input type="checkbox" name="use_pushbullet" id="pushbullet" value="1" ${config['use_pushbullet']} />
                        <label>Enable Pushbullet Notifications</label>
                    </div>
                    <div id="pushbulletoptions">
                        <div class="row">
                            <input type="checkbox" name="pushbullet_notify_onsnatch" value="1" ${config['pushbullet_notify_onsnatch']} />Notify on snatch
                        </div>
                        <div class="row">    
                            <input type="checkbox" name="pushbullet_notify_ondownload" value="1" ${config['pushbullet_notify_ondownload']} />Notify on download
                        </div>
                        <div class="row">
                            <input type="text" name="pushbullet_token" value="${config['pushbullet_token']}" size="35" placeholder="Pushbullet API">
                        </div>
                        <div class="row">
                            <input type="text" name="pushbullet_deviceid" value="${config['pushbullet_deviceid']}" size="35" placeholder="Pushbullet DeviceID">
                        </div>                        
                        <div class="row">
                            <input type="button" value="Test Pushbullet" id="testPushbullet">
                        </div>
                     </div>
                </fieldset>            
            </td>
            <td>
                <fieldset>
                    <h3>Pushover</h3>
                    <div class="row checkbox">
                        <input type="checkbox" name="use_pushover" id="pushover" value="1" ${config['use_pushover']} />
                        <label>Enable Pushover Notifications</label>
                    </div>
                    <div id="pushoveroptions">
                        <div class="row">
                            <input type="checkbox" name="pushover_onsnatch" value="1" ${config['pushover_onsnatch']} />Notify on snatch
                        </div>
			            <div class="row">
			                <input type="checkbox" name="pushover_ondownload" value="1" ${config['pushover_ondownload']} />Notify on download
			            </div>
                        <div class="row">
                            <input type="text" name="pushover_apitoken" value="${config['pushover_apitoken']}" size="35" placeholder="Pushover API Token">
                        </div>
                        <div class="row">
                            <input type="text" name="pushover_keys" value="${config['pushover_keys']}" size="35" placeholder="Pushover Keys">
                        </div>
                        <div class="row">
                            <input type="text" name="pushover_device" value="${config['pushover_device']}" size="35" placeholder="Pushover Device">
                        </div>                        
                        <div class="row">
                            <input type="text" name="pushover_priority" value="${config['pushover_priority']}" size="35" placeholder="Pushover Priority">
                        </div>
                        <div class="row">
                            <input type="button" value="Test Pushover" id="testPushover">
                        </div>
                    </div>
                </fieldset>
            </td>
            <td>
                <fieldset>
                    <h3>AndroidPN</h3>
                    <div class="row checkbox">
                        <input type="checkbox" name="use_androidpn" id="androidpn" value="1" ${config['use_androidpn']} />
                        <label>Enable AndroidPN Notifications</label>
                    </div>
                    <div id="androidpnoptions">
                        <div class="row">
                            <input type="checkbox" name="androidpn_notify_onsnatch" value="1" ${config['androidpn_notify_onsnatch']} />Notify on snatch
                        </div>
                        <div class="row">
                            <input type="checkbox" name="androidpn_notify_ondownload" value="1" ${config['androidpn_notify_ondownload']} />Notify on download
                        </div>
                        <div class="row">
                            <input type="checkbox" name="androidpn_broadcast" id="androidpn_broadcast" value="1" ${config['androidpn_broadcast']} />Broadcast notification
                        </div>
                        <div class="row">
                            <input type="text" name="androidpn_url" value="${config['androidpn_url']}" size="35" placeholder="AndroidPN notification url" />
                        </div>
                        <div class="row" id="androidpn_username">
                           <input type="text" name="androidpn_username"  value="${config['androidpn_username']}" size="35" placeholder="AndroidPN username" /> 
                        </div>
                        <div class="row">
                            <input type="button" value="Test AndroidPN" id="testAndroidPN">
                        </div>
                    </div>
                </fieldset>
            </td>
	    <td>
            	<fieldset>
                                <h3>NotifyMyAndroid</h3>
                                <div class="checkbox row">
                                    <input type="checkbox" name="use_nma" id="nma" value="1" ${config['use_nma']} /><label>Enable NotifyMyAndroid</label>
                                </div>
                                <div id="nmaoptions">
                                    <div class="row checkbox">
                                        <input type="checkbox" name="nma_onsnatch" value="1" ${config['nma_onsnatch']} /><label>Notify on snatch?</label>
                                    </div>
                                    <div class="row checkbox">
                                        <input type="checkbox" name="nma_ondownload" value="1" ${config['nma_ondownload']} /><label>Notify on download?</label>
                                    </div>
                                    <div class="row">
                                        <label>NotifyMyAndroid API Key</label>
                                        <input type="text" name="nma_apikey" value="${config['nma_apikey']}" size="30">
                                        <small>Separate multiple api keys with commas</small>
                                    </div>
                                    <div class="row">
                                        <label>Priority</label>
                                        <select name="nma_priority">
                                        %for x in [-2,-1,0,1,2]:
                                        <%
                                            if config['nma_priority'] == x:
                                                nma_priority_selected = 'selected'
                                            else:
                                                nma_priority_selected = ''

                                            if x == -2:
                                                nma_priority_value = 'Very Low'
                                            elif x == -1:
                                                nma_priority_value = 'Moderate'
                                            elif x == 0:
                                                nma_priority_value = 'Normal'
                                            elif x == 1:
                                                nma_priority_value = 'High'
                                            else:
                                                nma_priority_value = 'Emergency'
                                        %>
                                            <option value=${x} ${nma_priority_selected}>${nma_priority_value}</option>
                                        %endfor
                                        </select>
                                    </div>
                                    <div class="row">
                                        <input type="button" value="Test NMA" id="testNMA">
                                    </div>
                                </div>
		</fieldset>
            </td>
        </table>
        </div>
    </div>

    <div class="table_wrapper_button">
        <p><input type="submit" value="Save changes" id="add" style="float:right;"></p>
    </div>
    <p style="text-align:center;position:fixed;bottom:10px;margin-left:20px;color:grey">Branch: ${lazylibrarian.CURRENT_BRANCH} Current Version: ${lazylibrarian.CURRENT_VERSION}  : Latest  Version: ${lazylibrarian.LATEST_VERSION}</p>
    </div>
</form>
</%def>

<%def name="javascriptIncludes()">
    <script>
        function initThisPage()

        {
            if ($("#nzb").is(":checked"))
                    {
                            $("#usenet_options").show();
                    }
            else
                    {
                            $("#usenet_options").hide();
                    }

            $("#nzb").click(function(){
                    if ($("#nzb").is(":checked"))
                    {
                            $("#usenet_options").slideDown();
                    }
                    else
                    {
                            $("#usenet_options").slideUp();
                    }
            });
            if ($("#tor").is(":checked"))
                    {
                            $("#torrent_options").show();
                    }
            else
                    {
                            $("#torrent_options").hide();
                    }

            $("#tor").click(function(){
                    if ($("#tor").is(":checked"))
                    {
                            $("#torrent_options").slideDown();
                    }
                    else
                    {
                            $("#torrent_options").slideUp();
                    }
            });

            if ($("#tor_downloader_blackhole").is(":checked"))
                {
                        $("#tor_blackhole_options").show();
                }
            else
                {
                        $("#tor_blackhole_options").hide();
                }

            $("#tor_downloader_blackhole").click(function(){
                    if ($("#tor_downloader_blackhole").is(":checked"))
                    {
                            $("#tor_blackhole_options").slideDown();
                    }
                    else
                    {
                            $("#tor_blackhole_options").slideUp();
                    }
            });

            if ($("#tor_downloader_deluge").is(":checked"))
                {
                        $("#deluge_options").show();
                }
            else
                {
                        $("#deluge_options").hide();
                }
            $("#tor_downloader_deluge").click(function(){
                    if ($("#tor_downloader_deluge").is(":checked"))
                    {
                            $("#deluge_options").slideDown();
                    }
                    else
                    {
                            $("#deluge_options").slideUp();
                    }
            });

            if ($("#tor_downloader_transmission").is(":checked"))
                {
                        $("#transmission_options").show();
                }
            else
                {
                        $("#transmission_options").hide();
                }
            $("#tor_downloader_transmission").click(function(){
                    if ($("#tor_downloader_transmission").is(":checked"))
                    {
                            $("#transmission_options").slideDown();
                    }
                    else
                    {
                            $("#transmission_options").slideUp();
                    }
            });

            if ($("#tor_downloader_utorrent").is(":checked"))
                {
                        $("#utorrent_options").show();
                }
            else
                {
                        $("#utorrent_options").hide();
                }

            $("#tor_downloader_utorrent").click(function(){
                    if ($("#tor_downloader_utorrent").is(":checked"))
                    {
                            $("#utorrent_options").slideDown();
                    }
                    else
                    {
                            $("#utorrent_options").slideUp();
                    }
            });

            if ($("#nzb_downloader_blackhole").is(":checked"))
                {
                        $("#nzb_blackhole_options").show();
                }
            else
                {
                        $("#nzb_blackhole_options").hide();
                }

            $("#nzb_downloader_blackhole").click(function(){
                    if ($("#nzb_downloader_blackhole").is(":checked"))
                    {
                            $("#nzb_blackhole_options").slideDown();
                    }
                    else
                    {
                            $("#nzb_blackhole_options").slideUp();
                    }
            });

            if ($("#nzb_downloader_sabnzbd").is(":checked"))
                {
                        $("#sabnzbd_options").show();
                }
            else
                {
                        $("#sabnzbd_options").hide();
                }
            $("#nzb_downloader_sabnzbd").click(function(){
                    if ($("#nzb_downloader_sabnzbd").is(":checked"))
                    {
                            $("#sabnzbd_options").slideDown();
                    }
                    else
                    {
                            $("#sabnzbd_options").slideUp();
                    }
            });

            if ($("#nzb_downloader_nzbget").is(":checked"))
                {
                        $("#nzbget_options").show();
                }
            else
                {
                        $("#nzbget_options").hide();
                }
            $("#nzb_downloader_nzbget").click(function(){
                    if ($("#nzb_downloader_nzbget").is(":checked"))
                    {
                            $("#nzbget_options").slideDown();
                    }
                    else
                    {
                            $("#nzbget_options").slideUp();
                    }
            });

            if ($("#twitter").is(":checked"))
                    {
                            $("#twitteroptions").show();
                    }
            else
                    {
                            $("#twitteroptions").hide();
                    }

            $("#twitter").click(function(){
                    if ($("#twitter").is(":checked"))
                    {
                            $("#twitteroptions").slideDown();
                    }
                    else
                    {
                            $("#twitteroptions").slideUp();
                    }
            });
        
            if ($("#boxcar").is(":checked"))
                    {
                            $("#boxcaroptions").show();
                    }
            else
                    {
                            $("#boxcaroptions").hide();
                    }

            $("#boxcar").click(function(){
                    if ($("#boxcar").is(":checked"))
                    {
                            $("#boxcaroptions").slideDown();
                    }
                    else
                    {
                            $("#boxcaroptions").slideUp();
                    }
            });

            if ($("#fullscan").is(":checked"))
                    {
                            $("#fullscanoptions").show();
                    }
            else
                    {
                            $("#fullscanoptions").hide();
                    }

            $("#fullscan").click(function(){
                    if ($("#fullscan").is(":checked"))
                    {
                            $("#fullscanoptions").slideDown();
                    }
                    else
                    {
                            $("#fullscanoptions").slideUp();
                    }
            });

            if ($("#pushbullet").is(":checked"))
                    {
                            $("#pushbulletoptions").show();
                    }
            else
                    {
                            $("#pushbulletoptions").hide();
                    }

            $("#pushbullet").click(function(){
                    if ($("#pushbullet").is(":checked"))
                    {
                            $("#pushbulletoptions").slideDown();
                    }
                    else
                    {
                            $("#pushbulletoptions").slideUp();
                    }
            });

            if ($("#pushover").is(":checked"))
                    {
                            $("#pushoveroptions").show();
                    }
            else
                    {
                            $("#pushoveroptions").hide();
                    }
            $("#pushover").click(function(){
                    if ($("#pushover").is(":checked"))
                    {
                            $("#pushoveroptions").slideDown();
                    }
                    else
                    {
                            $("#pushoveroptions").slideUp();
                    }
            });

            if ($("#androidpn").is(":checked"))
                    {
                            $("#androidpnoptions").show();
                    }
            else
                    {
                            $("#androidpnoptions").hide();
                    }
            $("#androidpn").click(function(){
                    if ($("#androidpn").is(":checked"))
                    {
                        $("#androidpnoptions").slideDown();
                    }
                    else
                    {
                        $("#androidpnoptions").slideUp();
                    }
            });

            if ($("#androidpn_broadcast").is(":checked"))
                    {
                            $("#androidpn_username").hide();
                    }
            else
                    {
                            $("#androidpn_username").show();
                    }
            $("#androidpn_broadcast").click(function(){
                    if ($("#androidpn_broadcast").is(":checked"))
                    {
                        $("#androidpn_username").slideUp();
                    }
                    else
                    {
                        $("#androidpn_username").slideDown();
                    }
            });
    
                if ($("#nma").is(":checked"))
                        {
                                $("#nmaoptions").show();
                        }
                else
                        {
                                $("#nmaoptions").hide();
                        }

                $("#nma").click(function(){
                        if ($("#nma").is(":checked"))
                        {
                                $("#nmaoptions").slideDown();
                        }
                        else
                        {
                                $("#nmaoptions").slideUp();
                        }
                });
            
            $('#twitterStep1').click(function () {
                $('#testTwitter-result').html('');
                $.get("twitterStep1", function (data) {window.open(data); })
                    .done(function () { $('#testTwitter-result').html('<b>Step1:</b> Confirm Authorization'); });
            });

            $('#twitterStep2').click(function () {
                $('#testTwitter-result').html('');
                var twitter_key = $("#twitter_key").val();
                $.get("twitterStep2", {'key': twitter_key},
                    function (data) { $('#testTwitter-result').html(data); });
            });

            $('#testTwitter').click(function () {
                $.get("testTwitter",
                    function (data) { $('#testTwitter-result').html(data); });
            });

            $('#testPushbullet').click(function () {
                $.get("testPushbullet",
                    function (data) { window.alert(data) });
                    
            });

            $('#testPushover').click(function () {
                $.get("testPushover",
                    function (data) { window.alert(data) });
                    
            });

            $('#testNMA').click(function () {
                $.get("testNMA",
                    function (data) { window.alert(data) });
            });

            $("#testAndroidPN").click(function () {
                var androidpn_url = $.trim($("#androidpn_url").val());
                var androidpn_username = $.trim($("#androidpn_username").val());
                var androidpn_broadcast = ($("#androidpn_broadcast").prop('checked') == true) ? 'Y' : 'N';
                $.get("/testAndroidPN", {'url': androidpn_url, 'username': androidpn_username, 'broadcast': androidpn_broadcast})
                    .done(function (data) {
                        $("#testAndroidPN-result").html(data);
                    });
                });
        }

        $(document).ready(function() {
            initThisPage();
        });
    </script>
</%def>
